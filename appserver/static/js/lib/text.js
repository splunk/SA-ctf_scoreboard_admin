define(["module"],function(d){var n,i,h,c,f=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],m=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,k=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,b=typeof location!=="undefined"&&location.href,e=b&&location.protocol&&location.protocol.replace(/\:/,""),g=b&&location.hostname,a=b&&(location.port||undefined),l=[],j=(d.config&&d.config())||{};n={version:"2.0.5+",strip:function(o){if(o){o=o.replace(m,"");var p=o.match(k);if(p){o=p[1]}}else{o=""}return o},jsEscape:function(o){return o.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:j.createXhr||function(){var r,o,p;if(typeof XMLHttpRequest!=="undefined"){return new XMLHttpRequest()}else{if(typeof ActiveXObject!=="undefined"){for(o=0;o<3;o+=1){p=f[o];try{r=new ActiveXObject(p)}catch(q){}if(r){f=[p];break}}}}return r},parseName:function(q){var u,t,o,s=false,p=q.indexOf("."),r=q.indexOf("./")===0||q.indexOf("../")===0;if(p!==-1&&(!r||p>1)){u=q.substring(0,p);t=q.substring(p+1,q.length)}else{u=q}o=t||u;p=o.indexOf("!");if(p!==-1){s=o.substring(p+1)==="strip";o=o.substring(0,p);if(t){t=o}else{u=o}}return{moduleName:u,ext:t,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(r,v,p,o){var t,u,s,q=n.xdRegExp.exec(r);if(!q){return true}t=q[2];u=q[3];u=u.split(":");s=u[1];u=u[0];return(!t||t===v)&&(!u||u.toLowerCase()===p.toLowerCase())&&((!s&&!u)||s===o)},finishLoad:function(o,q,r,p){r=q?n.strip(r):r;if(j.isBuild){l[o]=r}p(r)},load:function(s,u,t,r){if(r.isBuild&&!r.inlineText){t();return}j.isBuild=r.isBuild;var p=n.parseName(s),v=p.moduleName+(p.ext?"."+p.ext:""),q=u.toUrl(v),o=(j.useXhr)||n.useXhr;if(!b||o(q,e,g,a)){n.get(q,function(w){n.finishLoad(s,p.strip,w,t)},function(w){if(t.error){t.error(w)}})}else{u([v],function(w){n.finishLoad(p.moduleName+"."+p.ext,p.strip,w,t)})}},write:function(s,p,q,o){if(l.hasOwnProperty(p)){var r=n.jsEscape(l[p]);q.asModule(s+"!"+p,"define(function () { return '"+r+"';});\n")}},writeFile:function(t,p,v,w,q){var u=n.parseName(p),o=u.ext?"."+u.ext:"",r=u.moduleName+o,s=v.toUrl(u.moduleName+o)+".js";n.load(r,v,function(x){var y=function(z){return w(s,z)};y.asModule=function(z,A){return w.asModule(z,s,A)};n.write(t,r,y,q)},q)}};if(j.env==="node"||(!j.env&&typeof process!=="undefined"&&process.versions&&!!process.versions.node)){i=require.nodeRequire("fs");n.get=function(o,q){var p=i.readFileSync(o,"utf8");if(p.indexOf("\uFEFF")===0){p=p.substring(1)}q(p)}}else{if(j.env==="xhr"||(!j.env&&n.createXhr())){n.get=function(p,t,o,r){var q=n.createXhr(),s;q.open("GET",p,true);if(r){for(s in r){if(r.hasOwnProperty(s)){q.setRequestHeader(s.toLowerCase(),r[s])}}}if(j.onXhr){j.onXhr(q,p)}q.onreadystatechange=function(v){var u,w;if(q.readyState===4){u=q.status;if(u>399&&u<600){w=new Error(p+" HTTP status: "+u);w.xhr=q;o(w)}else{t(q.responseText)}}};q.send(null)}}else{if(j.env==="rhino"||(!j.env&&typeof Packages!=="undefined"&&typeof java!=="undefined")){n.get=function(o,v){var q,w,p="utf-8",r=new java.io.File(o),s=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),p)),t="";try{q=new java.lang.StringBuffer();w=u.readLine();if(w&&w.length()&&w.charAt(0)===65279){w=w.substring(1)}q.append(w);while((w=u.readLine())!==null){q.append(s);q.append(w)}t=String(q.toString())}finally{u.close()}v(t)}}else{if(j.env==="xpconnect"||(!j.env&&typeof Components!=="undefined"&&Components.classes&&Components.interfaces)){h=Components.classes,c=Components.interfaces;Components.utils["import"]("resource://gre/modules/FileUtils.jsm");n.get=function(q,u){var p,r,o={},s=new FileUtils.File(q);try{p=h["@mozilla.org/network/file-input-stream;1"].createInstance(c.nsIFileInputStream);p.init(s,1,0,false);r=h["@mozilla.org/intl/converter-input-stream;1"].createInstance(c.nsIConverterInputStream);r.init(p,"utf-8",p.available(),c.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);r.readString(p.available(),o);r.close();p.close();u(o.value)}catch(t){throw new Error((s&&s.path||"")+": "+t)}}}}}}return n});